<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - Department Performance</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
<style>
:root {
  --primary-color: #007bff;
  --bg-light: #f5f8ff;
  --bg-dark: #1e1e2f;
  --card-light: #ffffff;
  --card-dark: #2c2c3e;
  --text-light: #000;
  --text-dark: #fff;
  --resolved-color: #52c41a;
  --pending-color: #faad14;
  --high-priority: #ff4d4f;
  --satisfaction-color: #007bff;
}

/* Body */
body { margin:0; font-family:'Segoe UI',sans-serif; display:flex; background-color: var(--bg-light); color: var(--text-light); transition:0.3s; }
body.dark-mode { background-color: var(--bg-dark); color: var(--text-dark); }

/* Sidebar */
.sidebar {
  position:fixed; top:0; left:0; width:220px; height:100vh;
  background-color: var(--primary-color); color:white; display:flex; flex-direction:column; padding-top:20px;
}
.sidebar h2 { text-align:center; margin-bottom:30px; }
.sidebar a { padding:15px 20px; color:white; text-decoration:none; transition:0.2s; }
.sidebar a:hover { background-color: rgba(255,255,255,0.2); cursor:pointer; }

/* Main */
.main { margin-left:220px; padding:20px; flex:1; overflow-y:auto; }

/* Filters */
.filters { margin-bottom:20px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.filters select, .filters input { padding:6px 12px; border-radius:6px; border:1px solid #ccc; cursor:pointer; }
.filters select:focus, .filters input:focus { outline:none; border-color:#007bff; box-shadow:0 0 5px rgba(0,123,255,0.3); }

/* KPI Cards */
.cards { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:30px; }
.card { flex:1; min-width:180px; background-color: var(--card-light); padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); transition:0.3s; cursor:pointer; }
body.dark-mode .card { background-color: var(--card-dark); }
.card:hover { transform:translateY(-3px); box-shadow:0 4px 12px rgba(0,0,0,0.2); }
.card h3 { margin:0 0 10px 0; font-size:1.2rem; }
.card p { margin:0; font-size:1.5rem; font-weight:bold; }

/* Latest Issues Table */
.table-container { overflow-x:auto; margin-bottom:30px; }
table { width:100%; border-collapse:collapse; }
th, td { padding:12px 15px; text-align:left; border-bottom:1px solid #ddd; }
th { background-color: var(--primary-color); color:white; }
body.dark-mode th { background-color: #0056b3; }
.priority-badge { padding:4px 8px; border-radius:6px; color:white; font-weight:bold; }
.high { background-color: var(--high-priority); }
.medium { background-color: var(--pending-color); }
.low { background-color: var(--resolved-color); }
.status { font-weight:bold; }
.resolved { color: var(--resolved-color); }
.pending { color: var(--pending-color); }

/* Quick Actions */
.actions { display:flex; flex-wrap:wrap; gap:15px; margin-bottom:30px; }
.action-btn { flex:1; min-width:120px; padding:12px; background-color: var(--primary-color); color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold; display:flex; align-items:center; justify-content:center; gap:8px; transition:0.3s; }
.action-btn:hover { background-color:#0056b3; }

/* Top Workers */
.top-workers { display:flex; flex-wrap:wrap; gap:20px; }
.worker-card { flex:1; min-width:180px; background-color: var(--card-light); padding:15px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
body.dark-mode .worker-card { background-color: var(--card-dark); }
.worker-card h4 { margin:0 0 8px 0; }
.worker-card p { margin:0; font-size:0.95rem; color:gray; }

/* Dark/Light Toggle */
.theme-toggle {
  position:fixed; bottom:20px; left:20px; padding:8px 12px; cursor:pointer;
  background-color:white; color:var(--primary-color); border:none; border-radius:4px;
}
body.dark-mode .theme-toggle { background-color:var(--primary-color); color:white; }
</style>
</head>
<body>

<div class="sidebar">
  <h2>Admin</h2>
  <a href="admin_dashboard.html">Dashboard</a>
  <a href="admin_reports.html">Reports</a>
  <a href="admin_department.html">Workers / Departments</a>
  <a href="admin_statistics.html">Analytics / Statistics</a>
  <a href="admin_settings.html">Settings / Profile</a>
  <a href="portal.html#admin-login">Logout</a>
</div>

<div class="main">

  <!-- Filters -->
  <div class="filters">
    <label>Time Period:</label>
    <select id="timePeriod">
      <option value="week">Last Week</option>
      <option value="month" selected>Last Month</option>
      <option value="year">Last Year</option>
    </select>
    <input type="text" placeholder="Search Issue..." id="searchIssue">
  </div>

  <!-- KPI Cards -->
  <div class="cards">
    <div class="card" onclick="alert('Show total issue details')">
      <h3>Total Issues</h3>
      <p id="totalIssues">0</p>
    </div>
    <div class="card" onclick="alert('Show resolved issues')">
      <h3>Resolved Issues</h3>
      <p id="resolvedIssues">0</p>
    </div>
    <div class="card" onclick="alert('Show pending issues')">
      <h3>Pending Issues</h3>
      <p id="pendingIssues">0</p>
    </div>
    <div class="card" onclick="alert('Show user satisfaction')">
      <h3>User Satisfaction</h3>
      <p id="satisfaction">0%</p>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="actions">
    <button class="action-btn"><i class="fas fa-plus-circle"></i> Assign Issue</button>
    <button class="action-btn"><i class="fas fa-forward"></i> Forward Pending</button>
    <button class="action-btn"><i class="fas fa-check-circle"></i> Mark Resolved</button>
    <button class="action-btn"><i class="fas fa-users"></i> Contact Workers</button>
  </div>

  <!-- Latest Issues Table -->
  <div class="table-container">
    <table id="issuesTable">
      <thead>
        <tr>
          <th>Issue</th>
          <th>User</th>
          <th>Priority</th>
          <th>Status</th>
          <th>Worker</th>
          <th>Date Reported</th>
        </tr>
      </thead>
      <tbody>
        <!-- Filled dynamically -->
      </tbody>
    </table>
  </div>

  <!-- Top Workers -->
  <h3>Top Workers</h3>
  <div class="top-workers" id="topWorkers">
    <!-- Filled dynamically -->
  </div>

</div>

<button class="theme-toggle" onclick="toggleTheme()">Dark/Light Mode</button>

<script>
// Dummy department data
let departmentData = {
  total: 120,
  resolved: 90,
  pending: 30,
  satisfaction: 85 // %
};

let latestIssues = [
  {name:"Pothole", user:"Alice", priority:"High", status:"Resolved", worker:"Worker A", date:"2025-09-19"},
  {name:"Street Light", user:"Bob", priority:"Medium", status:"Pending", worker:"Worker B", date:"2025-09-18"},
  {name:"Garbage", user:"Charlie", priority:"Low", status:"Resolved", worker:"Worker A", date:"2025-09-17"},
  {name:"Water Leak", user:"David", priority:"High", status:"Pending", worker:"Worker C", date:"2025-09-16"},
  {name:"Broken Bench", user:"Eve", priority:"Medium", status:"Resolved", worker:"Worker B", date:"2025-09-15"},
];

let topWorkers = [
  {name:"Worker A", resolved:30, pending:5},
  {name:"Worker B", resolved:25, pending:7},
  {name:"Worker C", resolved:20, pending:10},
];

// Update KPI cards
function updateCards(){
  document.getElementById("totalIssues").innerText = departmentData.total;
  document.getElementById("resolvedIssues").innerText = departmentData.resolved;
  document.getElementById("pendingIssues").innerText = departmentData.pending;
  document.getElementById("satisfaction").innerText = departmentData.satisfaction + "%";
}

// Populate latest issues table
function populateTable(){
  const tbody = document.getElementById("issuesTable").querySelector("tbody");
  tbody.innerHTML = "";
  latestIssues.forEach(issue=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${issue.name}</td>
      <td>${issue.user}</td>
      <td><span class="priority-badge ${issue.priority.toLowerCase()}">${issue.priority}</span></td>
      <td class="status ${issue.status.toLowerCase()}">${issue.status}</td>
      <td>${issue.worker}</td>
      <td>${issue.date}</td>
    `;
    tbody.appendChild(tr);
  });
}

// Populate top workers
function populateWorkers(){
  const container = document.getElementById("topWorkers");
  topWorkers.forEach(worker=>{
    const div = document.createElement("div");
    div.className="worker-card";
    div.innerHTML = `<h4>${worker.name}</h4>
                     <p>Resolved: ${worker.resolved}</p>
                     <p>Pending: ${worker.pending}</p>`;
    container.appendChild(div);
  });
}

const body = document.body;

// Apply saved theme on load
if (localStorage.getItem("darkMode") === "true") {
  body.classList.add("dark-mode");
} else {
  body.classList.remove("dark-mode");
}

function toggleTheme() {
  body.classList.toggle("dark-mode");

  // Save the current mode
  if (body.classList.contains("dark-mode")) {
    localStorage.setItem("darkMode", "true");
  } else {
    localStorage.setItem("darkMode", "false");
  }
}




// Initial load
updateCards();
populateTable();
populateWorkers();
</script>

</body>
</html>
