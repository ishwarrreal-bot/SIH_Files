<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gov.Admin - Priority Reports</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      color: #333;
      transition: background 0.3s, color 0.3s;
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #1e3a8a;
      color: #fff;
      padding: 0.8rem 1.5rem;
    }
    .logo { font-weight: bold; font-size: 1.5rem; color: #fbc02d; }
    .nav-right { display: flex; align-items: center; gap: 1.5rem; }
    .theme-toggle { font-size: 1.4rem; cursor: pointer; color: #fbc02d; transition: color 0.3s, transform 0.3s; }
    .theme-toggle:hover { transform: rotate(25deg); color: #ff7043; }
    .menu i.fa-ellipsis-vertical { font-size: 1.5rem; cursor: pointer; transition: color 0.3s, transform 0.2s; }
    .menu i.fa-ellipsis-vertical:hover { color: #fbc02d; transform: rotate(90deg); }

    .menu { position: relative; }
    .dropdown { display: none; position: absolute; right: 0; background: #fff; color: #000; min-width: 220px; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.2); animation: fadeIn 0.3s ease; z-index: 100; }
    .dropdown a { display: flex; align-items: center; gap: 8px; padding: 10px 16px; text-decoration: none; font-size: 0.95rem; transition: background 0.2s, transform 0.2s; }
    .dropdown a:hover { background-color: #fbc02d; color: #1e3a8a; transform: translateX(5px); }
    .menu.active .dropdown { display: block; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    .dark-mode { background-color: #121212; color: #fff; }
    .dark-mode nav { background-color: #1f1f1f; }
    .dark-mode .dropdown { background: #1f1f1f; color: #fff; }
    .dark-mode .dropdown a:hover { background: #2196f3; color: #fff; }

    .reports-container {
      max-width: 1000px;
      margin: 2rem auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .report-card {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.15);
      transition: transform 0.3s, box-shadow 0.3s;
      animation: fadeIn 0.5s ease;
    }
    .report-card:hover { transform: translateY(-5px); box-shadow: 0 6px 15px rgba(0,0,0,0.25); }

    .priority { display: flex; align-items: center; gap: 8px; font-weight: bold; margin-bottom: 8px; }
    .high { color: #e53935; }
    .medium { color: #ff7043; }
    .low { color: #fbc02d; }
    .report-card img { width: 100%; height: auto; border-radius: 8px; margin: 10px 0; }
    .report-info { font-size: 0.9rem; display: flex; flex-direction: column; gap: 6px; }
    .report-info i { margin-right: 6px; color: #1e3a8a; }
    .dark-mode .report-card { background: #1f1f1f; }
    .dark-mode .report-info i { color: #2196f3; }

  </style>
</head>
<body>

  <nav>
    <div class="logo">Gov.Admin</div>
    <div class="nav-right">
      <i class="fa-regular fa-moon theme-toggle" id="themeToggle" title="Toggle Dark/Light"></i>
      <div class="menu" id="menu">
        <i class="fa-solid fa-ellipsis-vertical"></i>
        <div class="dropdown">
          <a href="#"><i class="fa-solid fa-user-gear"></i> Change Details</a>
          <a href="#"><i class="fa-solid fa-map-location-dot"></i> Update Area of Work</a>
          <a href="#"><i class="fa-solid fa-clipboard-list"></i> View Reports</a>
          <a href="#"><i class="fa-solid fa-users-gear"></i> Manage Users</a>
          <a href="#"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="reports-container" id="reportsContainer">
    <!-- Reports will be dynamically inserted here -->
  </main>

  <script>
    const menu = document.getElementById('menu');
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const reportsContainer = document.getElementById('reportsContainer');

    menu.addEventListener('click', () => { menu.classList.toggle('active'); });
    window.addEventListener('click', (e) => { if(!menu.contains(e.target)) menu.classList.remove('active'); });

    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const dark = body.classList.contains('dark-mode');
      themeToggle.className = dark
        ? 'fa-regular fa-sun theme-toggle'
        : 'fa-regular fa-moon theme-toggle';
    });

    // Example report data
    const reports = [
      { userId: 'U001', priority: 'high', views: 25, date: '2025-09-18', time: '14:30' },
      { userId: 'U002', priority: 'medium', views: 10, date: '2025-09-17', time: '10:15' },
      { userId: 'U003', priority: 'low', views: 5, date: '2025-09-16', time: '09:00' },
    ];

    // Generate report cards
    function generateReports(locationString) {
      reportsContainer.innerHTML = '';
      reports.sort((a,b) => {
        const order = { high: 0, medium: 1, low: 2 };
        return order[a.priority] - order[b.priority];
      });

      reports.forEach((report, index) => {
        const priorityClass = report.priority === 'high' ? 'high' : report.priority === 'medium' ? 'medium' : 'low';
        const iconClass = report.priority === 'high' ? 'fa-triangle-exclamation' : report.priority === 'medium' ? 'fa-circle-exclamation' : 'fa-info-circle';
        const card = document.createElement('div');
        card.className = 'report-card';
        card.innerHTML = `
          <div class="priority ${priorityClass}"><i class="fa-solid ${iconClass}"></i> ${report.priority.charAt(0).toUpperCase() + report.priority.slice(1)} Priority</div>
          <div class="report-info">
            <span><i class="fa-solid fa-id-badge"></i> User ID: ${report.userId}</span>
            <span><i class="fa-solid fa-map-marker-alt"></i> Location: ${locationString}</span>
            <span><i class="fa-solid fa-calendar-alt"></i> Date: ${report.date}</span>
            <span><i class="fa-solid fa-clock"></i> Time: ${report.time}</span>
            <span><i class="fa-solid fa-eye"></i> Views: ${report.views}</span>
          </div>
          <img src="https://picsum.photos/400/200?random=${index}" alt="Report Image">
        `;
        reportsContainer.appendChild(card);
      });
    }

    // Get real-time location
    function getLocationAndRenderReports() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((position) => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          // Use OpenStreetMap API to get readable location
          fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`)
            .then(res => res.json())
            .then(data => {
              const displayName = data.display_name || `Lat:${lat.toFixed(2)}, Lon:${lon.toFixed(2)}`;
              generateReports(displayName);
            })
            .catch(() => {
              generateReports(`Lat:${lat.toFixed(2)}, Lon:${lon.toFixed(2)}`);
            });
        }, () => {
          generateReports('Location access denied');
        });
      } else {
        generateReports('Geolocation not supported');
      }
    }

    getLocationAndRenderReports();
  </script>

</body>
</html>
